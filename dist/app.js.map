{"version":3,"sources":["index.js","middleware/middleware1.js","middleware/middleware2.js","routes/route1.js","routes/route2.js","routes/route3.js"],"names":["ibird","require","koaLogger","session","appName","i18nAddon","mongooseAddon","accountsAddon","loggerAddon","app","use","newApp","name","mongo","import","localesDir","tokenKey","secretOrPrivateKey","payloadGetter","ctx","query","username","password","home","whitelists","useDir","mountDir","modelDir","play","module","exports","next","console","log","path","middleware","body","originalUrl","method","router","get","post","put","delete"],"mappings":";;AAAA,IAAMA,QAAQC,QAAQ,OAAR,CAAd;AACA,IAAMC,YAAYD,QAAQ,YAAR,CAAlB;AACA,IAAME,UAAUF,QAAQ,aAAR,CAAhB;AACA,IAAMG,UAAU,OAAhB;;AAEA,IAAMC,YAAYJ,QAAQ,YAAR,CAAlB;AACA,IAAMK,gBAAgBL,QAAQ,gBAAR,CAAtB;AACA,IAAMM,gBAAgBN,QAAQ,gBAAR,CAAtB;AACA,IAAMO,cAAcP,QAAQ,cAAR,CAApB;;AAEAQ,IAAIC,GAAJ,CAAQR,WAAR;;AAEA,IAAMO,MAAMT,MAAMW,MAAN,CAAa;AACrBC,UAAMR,OADe;AAErBS,oCAA8BT;AAFT,CAAb,CAAZ;;AAKAK,IAAIK,MAAJ,CAAWT,SAAX,EAAsB,EAAEU,YAAY,SAAd,EAAtB;AACAN,IAAIK,MAAJ,CAAWN,WAAX;AACAC,IAAIK,MAAJ,CAAWR,aAAX;AACAG,IAAIK,MAAJ,CAAWP,aAAX,EAA0B;AACtBS,cAAU,aADY;AAEtBC,wBAAoB,kBAFE;AAGtBC,mBAAe,uBAAUC,GAAV,EAAe;AAAA,yBACKA,IAAIC,KADT;AAAA,YAClBC,QADkB,cAClBA,QADkB;AAAA,YACRC,QADQ,cACRA,QADQ;;AAE1B,eAAQD,aAAa,QAAb,IAAyBC,aAAa,QAAvC,GAAmD;AACtDD,sBAAU,QAD4C;AAEtDT,kBAAM,YAFgD;AAGtDH,iBAAK,OAHiD;AAItDc,kBAAM;AAJgD,SAAnD,GAKH,IALJ;AAMH,KAXqB;AAYtBC,gBAAY,CACR,aADQ;AAZU,CAA1B;;AAiBAf,IAAIgB,MAAJ,CAAW,YAAX;AACAhB,IAAIiB,QAAJ,CAAa,QAAb;AACAjB,IAAIkB,QAAJ,CAAa,QAAb;;AAEAlB,IAAImB,IAAJ;;;ACzCAC,OAAOC,OAAP,GAAiB,UAACX,GAAD,EAAMY,IAAN,EAAe;AAC5BC,YAAQC,GAAR,CAAY,2BAAZ;AACAF;AACH,CAHD;;;ACAAF,OAAOC,OAAP,GAAiB,UAACX,GAAD,EAAMY,IAAN,EAAe;AAC5BC,YAAQC,GAAR,CAAY,2BAAZ;AACAF;AACH,CAHD;;;ACAAF,OAAOC,OAAP,GAAiB;AACbI,UAAM,gBADO;AAEbC,gBAAY;AAAA,eAAOhB,IAAIiB,IAAJ,gBAAqBjB,IAAIkB,WAAzB,OAAP;AAAA;AAFC,CAAjB;;;ACAAR,OAAOC,OAAP,GAAiB;AACblB,UAAK,QADQ;AAEb0B,YAAQ,MAFK;AAGbJ,UAAM,gBAHO;AAIbC,gBAAY;AAAA,eAAOhB,IAAIiB,IAAJ,gBAAqBjB,IAAIkB,WAAzB,OAAP;AAAA;AAJC,CAAjB;;;ACAAR,OAAOC,OAAP,GAAiB,UAACS,MAAD,EAAY;AACzBA,WAAOC,GAAP,CAAW,mBAAX,EAAgC;AAAA,eAAOrB,IAAIiB,IAAJ,gBAAqBjB,IAAIkB,WAAzB,OAAP;AAAA,KAAhC;AACAE,WAAOE,IAAP,CAAY,mBAAZ,EAAiC;AAAA,eAAOtB,IAAIiB,IAAJ,gBAAqBjB,IAAIkB,WAAzB,OAAP;AAAA,KAAjC;AACAE,WAAOG,GAAP,CAAW,mBAAX,EAAgC;AAAA,eAAOvB,IAAIiB,IAAJ,gBAAqBjB,IAAIkB,WAAzB,OAAP;AAAA,KAAhC;AACAE,WAAOI,MAAP,CAAc,mBAAd,EAAmC;AAAA,eAAOxB,IAAIiB,IAAJ,gBAAqBjB,IAAIkB,WAAzB,OAAP;AAAA,KAAnC;AACH,CALD","file":"app.js","sourcesContent":["const ibird = require('ibird');\nconst koaLogger = require('koa-logger');\nconst session = require('koa-session');\nconst appName = 'myApp';\n\nconst i18nAddon = require('ibird-i18n');\nconst mongooseAddon = require('ibird-mongoose');\nconst accountsAddon = require('ibird-accounts');\nconst loggerAddon = require('ibird-logger');\n\napp.use(koaLogger());\n\nconst app = ibird.newApp({\n    name: appName,\n    mongo: `mongodb://localhost/${appName}`,\n});\n\napp.import(i18nAddon, { localesDir: 'locales' });\napp.import(loggerAddon);\napp.import(mongooseAddon);\napp.import(accountsAddon, {\n    tokenKey: 'ibird_token',\n    secretOrPrivateKey: 'ibird_app_secret',\n    payloadGetter: function (ctx) {\n        const { username, password } = ctx.query;\n        return (username === 'yinfxs' && password === '123456') ? {\n            username: 'yinfxs',\n            name: 'Daniel Yin',\n            app: 'ibird',\n            home: 'http://ibird.yinfxs.com'\n        } : null;\n    },\n    whitelists: [\n        'POST /login'\n    ]\n});\n\napp.useDir('middleware');\napp.mountDir('routes');\napp.modelDir('models');\n\napp.play();","module.exports = (ctx, next) => {\n    console.log('我是middleware文件夹下的test1...');\n    next();\n};","module.exports = (ctx, next) => {\n    console.log('我是middleware文件夹下的test2...');\n    next();\n};","module.exports = {\n    path: '/routes/route1',\n    middleware: ctx => ctx.body = `Hello '${ctx.originalUrl}'`\n};","module.exports = {\n    name:'route2',\n    method: 'POST',\n    path: '/routes/route2',\n    middleware: ctx => ctx.body = `Hello '${ctx.originalUrl}'`\n};","module.exports = (router) => {\n    router.get('/routes/route3/r1', ctx => ctx.body = `Hello '${ctx.originalUrl}'`);\n    router.post('/routes/route3/r2', ctx => ctx.body = `Hello '${ctx.originalUrl}'`);\n    router.put('/routes/route3/r3', ctx => ctx.body = `Hello '${ctx.originalUrl}'`);\n    router.delete('/routes/route3/r4', ctx => ctx.body = `Hello '${ctx.originalUrl}'`);\n};"]}